; expected:
; r0=000206 r2=047135 r4=000000 sp=000000
; r1=047134 r3=056514 r5=000000 pc=001026
; psw=000000: cm=k pm=k pri=0        [9]
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Реализовать команду rol 
; Двоичный код: 0 000 110 001 ddd ddd
; Формат ассемблера: ROL dst
; 17-битное "слово", состоящее из [флаг С, dst] циклически сдвигается
; на 1 бит влево. 
; С оказывается в самом младшем бите dst.
; Самый старший бит dst оказывается в С.
; N, Z - как обычно
; V = N xor C
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; oct: 123456
; bin: 1 010 011 100 101 110
; test1 - rotate R1=123456 with C=0
; before: C-> 0 | 1 010 011 100 101 110 <- R1
; test1:  C-> 1 | 010 011 100 101 110 0 <- R1
; test1:  C-> 1 | 0 100 111 001 011 100 <- R1
; test1:  C-> 1 | 0   4   7   1   3   4 <- R1
; test2 - rotate R2=23456 with C=1
; before: C-> 1 | 0 010 011 100 101 110 <- R2
; test2:  C-> 0 | 010 011 100 101 110 1 <- R2
; test2:  C-> 0 | 0 100 111 001 011 101 <- R2
; test2:  C-> 0 | 0   4   7   1   3   5 <- R2
; test3 - rotate byte at 200 and then rotate byte at 201
; [201, 200] = 123456
; [C, 201, 200] = 0 1 010 011 100 101 110 = [0],[1010 0111],[0010 1110]
; rol 202: C-> 0 10 100 110  <- 202 (before)
; rol 202: C-> 1 0 100 1100 <- 202 (after)
; rol 203: C-> 1 0010 1110  <- 203 (before) 
; rol 203: C-> 0 010 1110 1 <- 203 (after)
; [203,202] = [010 1110 1] [0 100 1100] = [0 101 110 101 001 100] = 56514
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

    .=200
A:  .WORD  123456, 023456
B:  .BYTE  246, 56  ; [10 100 110], [00 101 110]  


    .=1000
    mov #A, R0      ; R0 = 200
    mov (R0)+, R1     ; R1 = 12345
    mov (R0)+, R2     ; R2 = 02345
    
    rol R1          ; R1 = 047134
    rol R2          ; R2 = 047135
    
    rolb (R0)+      ; 0 100 1100 - little
    rolb (R0)+      ; 010 1110 1 - big
    
    mov @#B, R3     ; 010 1110 1  0 100 1100 = 0 101 110 101 001 100 = 56514
    
    halt
